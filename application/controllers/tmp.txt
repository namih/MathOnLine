<?php

class Home_admin_c extends CI_Controller {
	
	public function __construct(){
			
		
		parent::__construct();
		$this->load->model('Home_admin_m');
		
	}
	
	
	/**
	* Descripción de la función en una línea
	* o en más de una línea.
	*
	* @author Autor del código
	* @param Parámetros que recibe la función. Formato: [* @param tipo $nombre_var comentario]
	* @return Valor devuelto por la función. Formato: [* @return tipo comentario]
	* @version 1.0
	*/
	function index(){
		$datos['temas'] = $this->tema_mes();
		$this->load->view('header/head_v');
		$this->load->view('administrador/Login_admin_v',$datos);
		$this->load->view('footer/footer_v');
	}
	
	/**
	 * 
	 * @author Cecilia Hernandez Vasquez
	 * @return lista con los temas del mes
	 * @param NA
	 * @version 1.0
	 */
	public function tema_mes(){
		$temas = $this->Home_admin_m->tema_mes();
		$mes = $this->etiquetas->meses();
		for($i=0;$i<count($temas);$i++){
			$temas[$i]['mounth'] =$mes[$temas[$i]['mounth']];
		}
		return $temas;
	}
	
	/**
	 * 
	 * @author Cecilia Hernandez Vasquez
	 * @return lista con los temas del mes
	 * @param NA
	 * @version 1.0
	 */
	function actualizarCalendarioEsc(){
		
	}
	
	function guardarCalendario(){
		
	}
	
	/**
	 * 
	 * @author Cecilia Hernandez Vasquez
	 * @return lista con los temas del mes
	 * @param NA
	 * @version 1.0
	 */
	
	public function editor_tema(){
		// via url id del mes
		$id_tema = $_GET['id_tema'];
		
		
		$temas = $this->Home_admin_m->tema_mes($id_tema);
		//print_r($temas);
		// $datos['temas'] = $temas;
		$this->load->view('header/head_v');
		$this->load->view('administrador/Editor_tema_mes_v',$temas);
		$this->load->view('footer/footer_v');	
	}
	
	/**
	 * 
	 * @author Cecilia Hernandez Vasquez
	 * @return lista con los temas del mes
	 * @param NA
	 * @version 1.0
	 */
	
	public function update_tema(){
		//reliazar el cambio a este controlaodr para actualizar tema.
		$editor = $this->input->post('editor');
		$update_editor=$this->Home_admin_m->actualizar_tema($editor);
		
	}
		
	
	
}






public function update_tema(){
		if ($_FILES!=NULL) {
		
			// Aqui va el Codigo faltante para subir la imagen :3
			
			$id_tema = $this->input->post('id_monthly_theme');
			$id_mes = $this->input->post('id_monthly_theme');
			$titulo = $this->input->post('title');
			$descripcion = $this->input->post('description');
			$image = '/statics/img/tema_mes/'.$_FILES['imagen']['name'];
			
			$datos = array( 'id_monthly_theme' => $id_tema,
							'mounth' => $id_mes,
							'title' => $titulo,
							'description' => $descripcion,
							'image' => $image, );
			
			$update_editor=$this->Home_admin_m->actualizar_tema($datos);
			if ($update_editor) {
				echo "Actualizacion exitosa";
			} else {
				echo" Intentar mas tarde";
			}
		} else {
			$editor = $this->input->post('editor');
			$update_editor=$this->Home_admin_m->actualizar_tema($editor);
			if ($update_editor) {
				echo "Actualizacion exitosa";
			} else {
				echo" Intentar mas tarde";
			}
		}
	}